webpackJsonp([5],{L4eT:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mvHQ"),i=a.n(n),o=a("TMn/"),r={name:"provider",mixins:[a("XsWq").a],mounted:function(){var t=this;this.$bus.$on("recargarListaProveedores",function(){t.fetchData(t.pagination.curr_page)}),console.log("mounted() en componente provider ejecutado"),this.fetchData(this.pagination.curr_page)},data:function(){return{loading:!0,deleting:!0,providerList:[],pagination:{curr_page:1,total_pages:1,limit:10},filters:{buscador:""}}},methods:{fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0,this.deleting=!1,this.providerList=[],this.pagination={curr_page:1,total_pages:1,limit:10},o.default.getFilteredProviders(this.filters,e).then(function(e){t.providerList=e.data.data,t.pagination=e.data.counts,t.encodeFilters(),t.loading=!1}).catch(function(){t.loading=!1})},handleEdit:function(t){var e={provider:t};console.log("Método handleDelete() - Abriendo modal provider pasándole los datos: ",t),this.$modal.show("provider",JSON.parse(i()(e)))},handleDelete:function(t){var e=this;console.log("Método handleDelete() - Abriendo modal provider pasándole los datos: ",t),this.$modal.show("dialog",{title:"Eliminar Proveedor",text:"¿Seguro que quieres <b>eliminar</b> el proveedor <b>"+t.nombre+"</b>?",buttons:[{title:"No"},{title:"Sí, borrar",default:!0,handler:function(){e.loading=!0,e.deleting=!0,console.log("Enviando la solicitud  delete() al back a traves de la ProviderApi "),o.default.delete(t.id).then(function(t){e.fetchData(1)}).catch(function(){e.loading=!1,e.deleting=!1}),e.$modal.hide("dialog")}}]})},changePagination:function(t){this.fetchData(t)}},watch:{$route:function(t,e){t.name!==e.name&&this.fetchData()}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"providers-list-component"},[a("title-box",{attrs:{icon:t.$helpers.getRouteIcon(),title:t.$helpers.getRouteTitle()}},[t.$helpers.isAdmin()?a("add-new-thing",{attrs:{disabled:t.deleting,text:"Añadir Proveedor"},on:{click:function(e){return t.$modal.show("provider")}}}):t._e()],1),a("div",{staticClass:"filters-box"},[a("custom-input",{staticClass:"filter-item",attrs:{placeholder:"Buscar Proveedor..."},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchData(1)}},model:{value:t.filters.buscador,callback:function(e){t.$set(t.filters,"buscador",e)},expression:"filters.buscador"}}),a("custom-button",{staticClass:"add-item",attrs:{disabled:t.deleting},nativeOn:{click:function(e){return t.fetchData(1)}}},[t._v("Buscar")])],1),t.pagination.total_pages>1?a("div",{staticClass:"top-pagination"},[a("div",{staticClass:"pagination-box"},[a("el-pagination",{attrs:{layout:"prev, pager, next","page-size":t.pagination.limit,"current-page":t.pagination.curr_page,"page-count":t.pagination.total_pages},on:{"current-change":t.changePagination}})],1)]):t._e(),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"provider-table custom-table",attrs:{data:t.providerList,fit:"",stripe:"stripe","element-loading-text":t.deleting?"Borrando...":"Cargando..."}},[a("el-table-column",{attrs:{label:"Nombre",prop:"nombre","min-width":"190px"}}),a("el-table-column",{attrs:{label:"CIF",prop:"cif","min-width":"190px",align:"center"}}),a("el-table-column",{attrs:{label:"Email",prop:"email","min-width":"190px",align:"center"}}),a("el-table-column",{attrs:{label:"Teléfono",prop:"phone","min-width":"120px",align:"center"}}),a("el-table-column",{attrs:{label:"Acciones","min-width":"110px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{effect:"light",content:"Editar Proveedor",placement:"top"}},[a("svg-icon",{staticClass:"control-icon cus",attrs:{"icon-class":"icono_editar"},nativeOn:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.handleEdit(e.row)}}})],1),t.$helpers.isAdmin()?a("el-tooltip",{attrs:{effect:"light",content:"Eliminar Proveedor",placement:"top-end"}},[a("svg-icon",{staticClass:"control-icon cus",attrs:{"icon-class":"icono_eliminar"},nativeOn:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.handleDelete(e.row)}}})],1):t._e()]}}])})],1),t.pagination.total_pages>1?a("div",{staticClass:"bottom-pagination"},[a("div",{staticClass:"pagination-box"},[a("el-pagination",{attrs:{layout:"prev, pager, next","page-size":t.pagination.limit,"current-page":t.pagination.curr_page,"page-count":t.pagination.total_pages},on:{"current-change":t.changePagination}})],1)]):t._e()],1)},staticRenderFns:[]};var s=a("VU/8")(r,l,!1,function(t){a("NtEC")},"data-v-af3465e8",null);e.default=s.exports},NtEC:function(t,e,a){var n=a("uWz+");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("c1ae453a",n,!0)},"uWz+":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.providers-list-component .filters-box[data-v-af3465e8] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n}\n.providers-list-component .filters-box .filter-item[data-v-af3465e8] {\n    min-width: 200px;\n    max-width: 200px;\n    margin: 10px;\n}\n.providers-list-component .filters-box .add-item[data-v-af3465e8] {\n    margin: 10px;\n    width: 150px;\n}\n@media (max-width: 768px) {\n.providers-list-component .providers-list-component .filters-box .filter-item[data-v-af3465e8] {\n    min-width: 46%;\n}\n}\n@media (max-width: 480px) {\n.providers-list-component .providers-list-component .filters-box .filter-item[data-v-af3465e8] {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    min-width: 95%;\n    margin: 10px;\n}\n}\n",""])}});