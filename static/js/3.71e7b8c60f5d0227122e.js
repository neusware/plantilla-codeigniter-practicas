webpackJsonp([3],{M0Lf:function(e,a,i){(e.exports=i("FZ+f")(!1)).push([e.i,"\n#user-profile-view[data-v-dd90f74a] {\n  min-height: 60vh;\n}\n#user-profile-view .profile-data-box .profile-main-info-box[data-v-dd90f74a] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n    -webkit-box-align: stretch;\n        -ms-flex-align: stretch;\n            align-items: stretch;\n}\n#user-profile-view .profile-data-box .profile-main-info-box .profile-img-box[data-v-dd90f74a] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -ms-flex-wrap: wrap;\n          flex-wrap: wrap;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n}\n#user-profile-view .profile-data-box .profile-main-info-box .profile-action-buttons[data-v-dd90f74a] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-orient: horizontal;\n      -webkit-box-direction: normal;\n          -ms-flex-direction: row;\n              flex-direction: row;\n      -ms-flex-wrap: wrap;\n          flex-wrap: wrap;\n      max-width: 220px;\n}\n#user-profile-view .profile-data-box .profile-main-info-box .profile-action-buttons .profile-action-button-box[data-v-dd90f74a] {\n        margin: 5px 5px !important;\n        width: 200px;\n}\n#user-profile-view .profile-data-box .profile-main-info-box .profile-action-buttons .profile-action-button-box .profile-action-button[data-v-dd90f74a] {\n          margin: 0px !important;\n}\n#user-profile-view .profile-data-box .profile-main-info-box .profile-action-buttons .profile-action-button[data-v-dd90f74a] {\n        margin: 5px !important;\n        width: 200px;\n}\n#user-profile-view .profile-data-box .profile-main-info-box .profile-action-buttons .profile-action-button .add-file-button[data-v-dd90f74a], #user-profile-view .profile-data-box .profile-main-info-box .profile-action-buttons .profile-action-button .remove-file-button[data-v-dd90f74a] {\n          margin: 5px 0px !important;\n}\n#user-profile-view .profile-data-box .profile-main-info-box .data-info[data-v-dd90f74a] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-orient: vertical;\n      -webkit-box-direction: normal;\n          -ms-flex-direction: column;\n              flex-direction: column;\n      -webkit-box-pack: center;\n          -ms-flex-pack: center;\n              justify-content: center;\n      margin: 10px 0px;\n      padding-left: 50px;\n      border-left: 2px solid var(--secondary-color);\n}\n#user-profile-view .profile-data-box .profile-main-info-box .data-info .user-info-item[data-v-dd90f74a] {\n        margin: 5px;\n}\n#user-profile-view .profile-data-box .profile-main-info-box .data-info .user-info-item .data-user-text[data-v-dd90f74a] {\n          font-weight: bold;\n          font-size: var(--hight-font-size);\n}\n#user-profile-view .profile-data-box .profile-main-info-box .data-info .user-info-item .data-user-data[data-v-dd90f74a] {\n          font-weight: normal;\n          font-size: 14px;\n}\n#user-profile-view .profile-data-box .profile-main-info-box .profile-picture-box[data-v-dd90f74a] {\n      border: 5px solid var(--secondary-color);\n      border-radius: 50%;\n      width: 200px;\n      height: 200px;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: center;\n          -ms-flex-pack: center;\n              justify-content: center;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n}\n#user-profile-view .profile-data-box .profile-main-info-box .profile-picture-box .imagen-guardada[data-v-dd90f74a] {\n        width: 100%;\n        height: 100%;\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-pack: center;\n            -ms-flex-pack: center;\n                justify-content: center;\n        -webkit-box-align: center;\n            -ms-flex-align: center;\n                align-items: center;\n}\n#user-profile-view .profile-data-box .profile-main-info-box .profile-picture-box .profile-img[data-v-dd90f74a] {\n        width: 96%;\n        height: 96%;\n        margin-bottom: 6%;\n}\n#user-profile-view .profile-data-box .profile-main-info-box .profile-datos[data-v-dd90f74a] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n}\n#user-profile-view .profile-data-box .profile-main-info-box .profile-datos .profile-textos[data-v-dd90f74a] {\n        border-right: 1px solid var(--font-color);\n        font-size: 20px;\n        padding: 10px 20px;\n        text-align: right;\n}\n#user-profile-view .profile-data-box .profile-main-info-box .profile-datos .profile-fechas[data-v-dd90f74a] {\n        font-size: 20px;\n        padding: 10px 20px;\n        color: var(--main-color);\n}\n#user-profile-view .profile-data-box .material-card[data-v-dd90f74a] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n    width: 100%;\n    font-size: 1.2em;\n    padding: 50px;\n    margin-top: 50px;\n    border-radius: 8px;\n    background: #fff;\n    -webkit-box-shadow: 0 6px 10px rgba(0, 0, 0, 0.08), 0 0 6px rgba(0, 0, 0, 0.05);\n            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.08), 0 0 6px rgba(0, 0, 0, 0.05);\n    transition: 0.3s transform cubic-bezier(0.155, 1.105, 0.295, 1.12), 0.3s box-shadow, 0.3s -webkit-transform cubic-bezier(0.155, 1.105, 0.295, 1.12);\n    padding: 15px 30px;\n}\n#user-profile-view .profile-data-box .material-card .user-item-box[data-v-dd90f74a] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      min-width: 200px;\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n}\n#user-profile-view .profile-data-box .material-card .user-item-box .user-item-text[data-v-dd90f74a] {\n        margin-left: 10px;\n}\n",""])},"g3//":function(e,a,i){var t=i("M0Lf");"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);i("rjj0")("8cf3a1a2",t,!0)},iRCz:function(e,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=i("mvHQ"),n=i.n(t),o=i("pcot"),s={name:"ExampleModuleView",mixins:[i("XsWq").a],created:function(){this.user_id=this.$route.params.id_usuario?this.$route.params.id_usuario:this.$helpers.getUser().id,(this.is_perfil_personal||this.$helpers.isAdmin())&&this.fetchData()},data:function(){return{loading:!0,imagen_loading:!1,user_id:null,user_data:{}}},methods:{fetchData:function(){var e=this;o.default.getById(this.user_id).then(function(a){e.user_data=a.data,e.loading=!1}).catch(function(){e.loading=!1})},editProfileImg:function(e){var a=this,i=new FormData,t={id:this.user_data.id};e.raw&&(i.append("imagen",e.raw),i.append("data",n()(t))),o.default.updateUserImage(i).then(function(e){a.$refs.user_image_ref.clearFiles(),a.$bus.$emit("userAvatarChanged"),a.fetchData()}).catch(function(){a.imagen_loading=!0,setTimeout(function(){a.imagen_loading=!1},50)})},deleteUserImageDialog:function(){var e=this;this.$modal.show("dialog",{title:"Eliminar Imagen",text:"¿Seguro que quieres <b>eliminar</b> la imagen seleccionada?",buttons:[{title:"No"},{title:"Sí, borrar",default:!0,handler:function(){e.$modal.hide("dialog"),o.default.deleteUserImage(e.user_data.id).then(function(a){e.$bus.$emit("userAvatarChanged"),e.fetchData()}).catch(function(e){})}}]})},handleEditUser:function(e){this.$modal.show("usuario",JSON.parse(n()({user:e})))},handleDeleteUser:function(e){var a=this;this.$modal.show("dialog",{title:"Eliminar Usuario",text:"¿Seguro que quieres <b>eliminar</b> este usuario? <b>"+e.username+"</b>?",buttons:[{title:"No"},{title:"Sí, borrar",default:!0,handler:function(){o.default.delete(e.id).then(function(e){a.$modal.hide("dialog"),a.encodeFilters("/usuarios",null,"raw")}).catch(function(){})}}]})}},computed:{is_perfil_personal:function(){return this.user_id==this.$helpers.getUser().id},has_user_access:function(){var e=!1;return this.$helpers.isAdmin()&&(e=!0),e}},watch:{$route:function(){this.loading=!0,this.user_id=this.$route.params.id_usuario?this.$route.params.id_usuario:this.$helpers.getUser().id,this.fetchData()}}},r={render:function(){var e=this,a=e.$createElement,i=e._self._c||a;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"profile-tab h-bigger-loading-font",attrs:{id:"user-profile-view","element-loading-text":"Cargando..."}},[e.loading?e._e():i("div",{staticClass:"loading-box"},[e.user_data?i("title-box",{attrs:{routeBack:["UsersList",null],title:e.is_perfil_personal?"Mi Perfil":"Perfil de "+e.user_data.first_name+" "+e.user_data.last_name}}):i("title-box",{attrs:{routeBack:["UsersList",null],title:"Perfil no autorizado"}}),e.loading||e.user_data?e.loading||!e.is_perfil_personal&&!e.$helpers.isAdmin()?e._e():[i("div",{staticClass:"profile-data-box"},[i("div",{staticClass:"profile-main-info-box"},[i("div",{staticClass:"profile-img-box"},[e.user_data.imagen?i("div",{staticClass:"profile-picture-box"},[i("div",{directives:[{name:"viewer",rawName:"v-viewer",value:{inline:!1,button:!0,navbar:!1,title:!1,toolbar:!1,tooltip:!1,movable:!0,zoomable:!0,rotatable:!1,scalable:!1,transition:!1,fullscreen:!1,keyboard:!1},expression:"{ inline: false, button: true, navbar: false, title: false, toolbar: false, tooltip: false, movable: true, zoomable: true, rotatable: false, scalable: false, transition: false, fullscreen: false, keyboard: false }"}],staticClass:"imagen-guardada images clearfix"},[e.user_data.imagen?i("img",{staticStyle:{cursor:"pointer","border-radius":"50%","object-fit":"cover"},attrs:{src:e.$helpers.fileUrl("User","imagen",e.user_data.imagen),width:"100%",height:"100%"}}):e._e()])]):i("div",{staticClass:"profile-picture-box"},[i("svg-icon",{staticClass:"profile-img",attrs:{"icon-class":"user_default"}})],1)]),i("div",{staticClass:"profile-action-buttons"},[e.imagen_loading?e._e():i("div",{staticClass:"profile-action-button"},[e.imagen_loading?i("div",{staticClass:"upload-file-item"},[i("custom-button",{staticClass:"add-file-button profile-action-button",attrs:{rounded:"rounded",disabled:"disabled",thin:"thin",zoom_animation:"zoom_animation"},nativeOn:{click:function(e){e.preventDefault()}}},[i("i",{staticClass:"el-icon-delete"}),i("span",{staticClass:"fake-space-left"},[e._v("Subir imagen")])])],1):i("div",{staticClass:"upload-file-item"},[i("el-upload",{ref:"user_image_ref",attrs:{id:"user-image",action:"","on-change":e.editProfileImg,"auto-upload":!1,limit:1,"show-file-list":!1}},[i("custom-button",{staticClass:"add-file-button profile-action-button",attrs:{rounded:"rounded",thin:"thin",zoom_animation:"zoom_animation"},nativeOn:{click:function(e){e.preventDefault()}}},[i("i",{staticClass:"el-icon-upload"}),i("span",{staticClass:"fake-space-left"},[e._v("Subir imagen")])])],1)],1),e.user_data.imagen?i("div",{staticClass:"delete-img-user"},[i("custom-button",{staticClass:"remove-file-button profile-action-button",attrs:{rounded:"rounded",disabled:e.imagen_loading,thin:"thin",zoom_animation:"zoom_animation"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteUserImageDialog(a)}}},[i("i",{staticClass:"el-icon-delete"}),i("span",{staticClass:"fake-space-left"},[e._v("Quitar imagen")])])],1):e._e()]),i("custom-button",{staticClass:"edit-user profile-action-button",attrs:{rounded:"rounded",thin:"thin",zoom_animation:"zoom_animation"},nativeOn:{click:function(a){return a.preventDefault(),e.handleEditUser(e.user_data)}}},[i("i",{staticClass:"el-icon-edit"}),i("span",{staticClass:"fake-space-left"},[e._v("Editar Usuario")])]),e.$helpers.getUser().id==e.user_data.id?i("div",{staticClass:"profile-action-button",staticStyle:{height:"54px"}}):e._e(),e.$helpers.getUser().id!=e.user_data.id?i("custom-button",{staticClass:"delete-user profile-action-button",attrs:{rounded:"rounded",thin:"thin",zoom_animation:"zoom_animation"},nativeOn:{click:function(a){return a.preventDefault(),e.handleDeleteUser(e.user_data)}}},[i("i",{staticClass:"el-icon-delete"}),i("span",{staticClass:"fake-space-left"},[e._v("Eliminar Usuario")])]):e._e()],1),i("div",{staticClass:"data-info"},[i("div",{staticClass:"user-info-item"},[i("span",{staticClass:"data-user-text"},[e._v("Fecha de registro: ")]),i("span",{staticClass:"data-user-data"},[e._v(e._s(e.$moment(1e3*e.user_data.created_on).format("DD/MM/YYYY")))])]),i("div",{staticClass:"user-info-item"},[i("span",{staticClass:"data-user-text"},[e._v("Última conexión: ")]),i("span",{staticClass:"data-user-data"},[e._v(e._s(e.$moment(1e3*e.user_data.last_login).format("DD/MM/YYYY")))])]),i("div",{staticClass:"user-info-item"},[i("span",{staticClass:"data-user-text"},[e._v("Rol: ")]),e._l(e.user_data.grupos,function(a){return i("span",{staticClass:"data-user-data"},[e._v(e._s(a.grupo.description))])})],2)])]),i("div",{staticClass:"material-card"},[i("div",{staticClass:"user-item-box"},[i("i",{staticClass:"el-icon-user"}),i("p",{staticClass:"user-item-text"},[e._v(e._s(e.user_data.first_name)+" "+e._s(e.user_data.last_name))])]),i("div",{staticClass:"user-item-box"},[i("i",{staticClass:"el-icon-message"}),i("p",{staticClass:"user-item-text"},[e._v(e._s(e.user_data.email))])]),i("div",{staticClass:"user-item-box"},[i("i",{staticClass:"el-icon-phone"}),i("p",{staticClass:"user-item-text"},[e._v(e._s(e.user_data.phone))])])])])]:[i("h1",[e._v("El usuario no existe o no tienes acceso a este perfil")])]],2)])},staticRenderFns:[]};var l=i("VU/8")(s,r,!1,function(e){i("g3//")},"data-v-dd90f74a",null);a.default=l.exports}});